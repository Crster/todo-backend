{"version":3,"file":"index.js","mappings":"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","sources":["webpack://todo-backend/webpack/bootstrap","webpack://todo-backend/webpack/runtime/compat get default export","webpack://todo-backend/webpack/runtime/define property getters","webpack://todo-backend/webpack/runtime/hasOwnProperty shorthand","webpack://todo-backend/external commonjs \"express\"","webpack://todo-backend/external commonjs \"body-parser\"","webpack://todo-backend/external commonjs \"@crster9600/crster-html\"","webpack://todo-backend/external commonjs \"dotenv/config\"","webpack://todo-backend/external node-commonjs \"path\"","webpack://todo-backend/./services/config.js","webpack://todo-backend/external commonjs \"winston\"","webpack://todo-backend/./services/logger.js","webpack://todo-backend/./routes/api/user.js","webpack://todo-backend/./routes/api/index.js","webpack://todo-backend/external commonjs \"passport\"","webpack://todo-backend/external commonjs \"passport-local\"","webpack://todo-backend/external commonjs \"argon2\"","webpack://todo-backend/./services/database.js","webpack://todo-backend/external commonjs \"mongodb\"","webpack://todo-backend/./models/user.js","webpack://todo-backend/external commonjs \"validate.js\"","webpack://todo-backend/./services/validator.js","webpack://todo-backend/./controllers/loginUser.js","webpack://todo-backend/./services/passport.js","webpack://todo-backend/./routes/auth.js","webpack://todo-backend/./routes/pages/welcome.js","webpack://todo-backend/./routes/pages/login.js","webpack://todo-backend/./routes/pages/index.js","webpack://todo-backend/external commonjs \"serve-favicon\"","webpack://todo-backend/./routes/static.js","webpack://todo-backend/./routes/index.js","webpack://todo-backend/./index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"express\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"body-parser\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@crster9600/crster-html\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"dotenv/config\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"path\");","import \"dotenv/config\"\r\nimport path from \"path\"\r\n\r\nexport default {\r\n  port: process.env.PORT ?? 8080,\r\n  viewPath: path.resolve(\"./views\"),\r\n  nodeModule: path.resolve(\"./node_modules\"),\r\n  wwwroot: path.resolve(\"./public\"),\r\n  dbUri: process.env.MONGO_URI,\r\n  dbName: process.env.DB_NAME ?? \"sampledb\",\r\n  jwtToken: {\r\n    secret: process.env.JWT_SECRET,\r\n    expiresIn: 60 * 60,\r\n  },\r\n  staticOption: { maxAge: \"1d\" },\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"winston\");","import { createLogger, transports, format } from \"winston\"\r\n\r\nconst beautifyFormat = format.combine(\r\n  format.colorize({\r\n    all: true,\r\n  }),\r\n  format.timestamp(),\r\n  format.printf(\r\n    (info) => `${info.timestamp} ${info.label ?? info.level}: ${info.message}`,\r\n  ),\r\n)\r\n\r\nconst logger = createLogger({\r\n  format: beautifyFormat,\r\n  transports: [new transports.Console()],\r\n})\r\n\r\nexport default logger\r\n","import express from \"express\"\r\n\r\nconst router = express.Router()\r\n\r\nexport default router\r\n","import express from \"express\"\r\nimport user from \"./user\"\r\n\r\nconst router = express.Router()\r\nrouter.use(\"/user\", user)\r\n\r\nexport default router\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"passport\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"passport-local\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"argon2\");","import { MongoClient } from \"mongodb\"\r\nimport config from \"./config\"\r\n\r\nexport const client = new MongoClient(config.dbUri)\r\n\r\nexport default function collection(name) {\r\n  return client.db(config.dbName).collection(name)\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"mongodb\");","import db from \"../services/database\"\r\n\r\nclass User {\r\n  constructor(user) {\r\n    this.id = user._id\r\n    this.name = user.name\r\n    this.username = user.username\r\n    this.email = user.email\r\n    this.password = user.password\r\n  }\r\n}\r\n\r\nexport async function getUserByUsername(username) {\r\n  let ret = null;\r\n\r\n  const row = db(\"users\").findOne({ username })\r\n  if (row) {\r\n    ret = new User(row)\r\n  }\r\n\r\n  return ret\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"validate.js\");","import validate from \"validate.js\"\r\n\r\nclass ValidatorBuilder {\r\n  constructor(data) {\r\n    this.data = data\r\n    this.tester = {}\r\n\r\n    for (const key in data) {\r\n      this.tester[key] = {}\r\n    }\r\n  }\r\n\r\n  exists(field) {\r\n    Object.assign(this.tester[field], { presence: true })\r\n    return this\r\n  }\r\n\r\n  equals(field, field2) {\r\n    Object.assign(this.tester[field], { equality: field2 })\r\n    return this\r\n  }\r\n\r\n  isNumber(field) {\r\n    Object.assign(this.tester[field], { type: \"number\" })\r\n    return this\r\n  }\r\n\r\n  isString(field) {\r\n    Object.assign(this.tester[field], { type: \"string\" })\r\n    return this\r\n  }\r\n\r\n  isArray(field) {\r\n    Object.assign(this.tester[field], { type: \"array\" })\r\n    return this\r\n  }\r\n\r\n  isUrl(field) {\r\n    Object.assign(this.tester[field], { url: true })\r\n    return this\r\n  }\r\n\r\n  isBetween(field, min, max) {\r\n    Object.assign(this.tester[field], {\r\n      numerically: { greaterThanOrEqualTo: min, lessThanOrEqualTo: max },\r\n    })\r\n    return this\r\n  }\r\n\r\n  isDate(field) {\r\n    Object.assign(this.tester[field], { datetime: true })\r\n    return this\r\n  }\r\n\r\n  isEmail(field) {\r\n    Object.assign(this.tester[field], { email: true })\r\n    return this\r\n  }\r\n\r\n  isValid(field, format) {\r\n    Object.assign(this.tester[field], { format })\r\n    return this\r\n  }\r\n\r\n  exec() {\r\n    const invalid = validate(this.data, this.tester)\r\n    if (invalid) {\r\n      for (const key in invalid) {\r\n        const errors = invalid[key]\r\n        if (Array.isArray(errors) && errors.length > 0) {\r\n          throw new Error(errors[0])\r\n        }\r\n      }\r\n\r\n      throw new Error(\"Invalid data\")\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  test() {\r\n    try {\r\n      return this.exec()\r\n    } catch {\r\n      return false\r\n    }\r\n  }\r\n}\r\n\r\nexport default function validator(data) {\r\n  return new ValidatorBuilder(data)\r\n}\r\n","import { verify } from \"argon2\"\r\nimport { getUserByUsername } from \"../models/user\"\r\nimport validator from \"../services/validator\"\r\n\r\nexport default async function (username, password) {\r\n  validator({ username, password }).exists(\"username\").exists(\"password\").exec()\r\n  \r\n  const user = await getUserByUsername(username)\r\n\r\n  if (!user || !(await verify(user.password, password))) {\r\n    throw new Error(\"invalid credential\")\r\n  }\r\n\r\n  return user\r\n}\r\n","import * as passport from \"passport\"\r\nimport LocalStrategy from \"passport-local\"\r\nimport { loginUser } from \"../controllers\"\r\n\r\npassport.use(\r\n  \"local\",\r\n  new LocalStrategy(function (username, password, done) {\r\n    loginUser(username, password).then((user) => done(null, user))\r\n  }),\r\n)\r\n\r\nexport default passport\r\n","import express from \"express\"\r\nimport passport from \"../services/passport\"\r\n\r\nconst router = express.Router()\r\nrouter.post(\r\n  \"/local\",\r\n  passport.authenticate(\"local\", {\r\n    successRedirect: \"/dashboard\",\r\n    failureRedirect: \"/login\",\r\n  }),\r\n)\r\n\r\nexport default router\r\n","import express from \"express\"\r\nconst router = express.Router()\r\n\r\nrouter.get(\"/\", (req, res) => {\r\n  res.render(\"welcome\", { title: \"Landing Page\" })\r\n})\r\n\r\nexport default router\r\n","import express from \"express\"\r\nconst router = express.Router()\r\n\r\nrouter.get(\"/login\", (req, res) => {\r\n  res.render(\"login\", { title: \"Login\" })\r\n})\r\n\r\nexport default router","import express from \"express\"\r\nimport welcome from \"./welcome\"\r\nimport login from \"./login\"\r\n\r\nconst router = express.Router()\r\nrouter.use(welcome)\r\nrouter.use(login)\r\n\r\nexport default router\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"serve-favicon\");","import express from \"express\"\r\nimport favicon from \"serve-favicon\"\r\nimport config from \"../services/config\"\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    localPath: config.wwwroot,\r\n  },\r\n  {\r\n    path: \"/jquery\",\r\n    localPath: `${config.nodeModule}/jquery/dist`,\r\n  },\r\n  {\r\n    path: \"/bootstrap\",\r\n    localPath: `${config.nodeModule}/bootstrap/dist`,\r\n  },\r\n  {\r\n    path: \"/fontawesome\",\r\n    localPath: `${config.nodeModule}/@fortawesome/fontawesome-free`,\r\n  },\r\n]\r\n\r\nconst router = express.Router()\r\n\r\nrouter.use(favicon(`${config.wwwroot}/favicon.png`))\r\nroutes.forEach((ii) =>\r\n  router.use(ii.path, express.static(ii.localPath, config.staticOption)),\r\n)\r\n\r\nexport default router\r\n","import express from \"express\"\r\n\r\nimport apiRoute from \"./api\"\r\nimport authRoute from \"./auth\"\r\nimport pageRoute from \"./pages\"\r\nimport staticRoute from \"./static\"\r\n\r\nconst router = express.Router()\r\n\r\nrouter.use(\"/public\", staticRoute)\r\nrouter.use(\"/auth\", authRoute)\r\nrouter.use(\"/api\", apiRoute)\r\nrouter.use(\"/\", pageRoute)\r\n\r\nexport default router\r\n","import express from \"express\"\r\nimport bodyParser from \"body-parser\"\r\nimport chtml from \"@crster9600/crster-html\"\r\n\r\nimport config from \"./services/config\"\r\nimport logger from \"./services/logger\"\r\nimport routes from \"./routes\"\r\n\r\nconst server = express()\r\n\r\nserver.engine(\"html\", chtml.expressViewEngine)\r\nserver.set(\"view engine\", \"html\")\r\nserver.set(\"views\", config.viewPath)\r\n\r\nserver.use(bodyParser.json())\r\nserver.use(bodyParser.urlencoded({ extended: false }))\r\nserver.use(routes)\r\n\r\nserver.use((req, res) => {\r\n  res.render(\"404\")\r\n})\r\n\r\nserver.use((error, req, res, next) => {\r\n  res.render(\"500\", { error: error.message })\r\n})\r\n\r\nserver.listen(config.port, () => {\r\n  logger.info(`Server is running at http://localhost:${config.port}/`)\r\n})\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","require","port","process","env","PORT","viewPath","path","nodeModule","wwwroot","dbUri","MONGO_URI","dbName","DB_NAME","jwtToken","secret","JWT_SECRET","expiresIn","staticOption","maxAge","beautifyFormat","format","all","info","timestamp","label","level","message","createLogger","transports","express","router","use","user","client","MongoClient","config","collection","name","db","User","this","id","_id","username","email","password","getUserByUsername","ret","row","findOne","ValidatorBuilder","data","tester","field","assign","presence","field2","equality","type","url","min","max","numerically","greaterThanOrEqualTo","lessThanOrEqualTo","datetime","invalid","validate","errors","Array","isArray","length","Error","exec","validator","i","exists","verify","passport","LocalStrategy","done","loginUser","then","post","authenticate","successRedirect","failureRedirect","req","res","render","title","welcome","login","routes","localPath","favicon","forEach","ii","staticRoute","authRoute","apiRoute","pageRoute","server","engine","chtml","set","bodyParser","extended","error","next","listen","logger"],"sourceRoot":""}